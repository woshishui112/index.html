import React, { useState, useRef } from 'react';
import { Search, AlertTriangle, ShieldCheck, XCircle, ChevronDown, ChevronUp, Gavel, FileText, AlertOctagon, Tag, Camera, Loader2, ScanLine, Image as ImageIcon } from 'lucide-react';

/**
 * å®¶åº­ç”¨è¯é¿å‘æŒ‡å— - AI æ——èˆ°ç‰ˆ (50+ æ•°æ®åº“)
 * åŸºäº AI æ…§çœ¼ç‰ˆæ¶æ„ï¼Œæ‰©å……äº†å…¨é‡é«˜å±è¯ç‰©åº“ï¼Œæ”¯æŒç›¸å†Œä¸Šä¼ ã€‚
 */

// --- 1. è¯å“æ•°æ®åº“ (50+ç§ ç»ˆæå…¨é‡ç‰ˆ) ---
const drugDatabase = [
  // ================= ğŸ”´ çº¢åŒºï¼šå›½å®¶æ³¨é”€/ç»å¯¹ç¦ç”¨/è‡´æ­»é£é™© =================
  {
    id: 1,
    name: "å®‰ä¹ƒè¿‘",
    abbr: "Analgin",
    aliases: ["å¤§è¯ç‰‡", "é€€çƒ§é’ˆ", "è¯ºç“¦é‡‘", "Metamizole"],
    category: "é€€çƒ§æ­¢ç—›",
    riskLevel: "âŒ å›½å®¶æ³¨é”€ (æé«˜å±)",
    riskColor: "bg-red-600 text-white",
    harm: "ã€è‡´æ­»ã€‘ç²’ç»†èƒç¼ºä¹ç—‡ï¼ˆæ€å…‰ç™½ç»†èƒï¼Œå…ç–«ç˜«ç—ªï¼‰ï¼›ä¸¥é‡è¿‡æ•æ€§ä¼‘å…‹ã€‚",
    consequence: "å›½å®¶è¯ç›‘å±€å…¬å‘Š[2020]29å·ï¼šåœæ­¢ç”Ÿäº§ï¼Œæ³¨é”€æ‰¹æ–‡ã€‚",
    source: "å›½å®¶è¯ç›‘å±€å…¬å‘Š",
    alternatives: ["å¸ƒæ´›èŠ¬", "å¯¹ä¹™é…°æ°¨åŸºé…š"],
    tags: ["è‡´æ­»é£é™©", "è¿‡æ•ä¼‘å…‹"]
  },
  {
    id: 2,
    name: "å¼‚ä¸™å—ª",
    abbr: "PMZ",
    aliases: ["éé‚£æ ¹", "ä¼¤é£æ­¢å’³ç³–æµ†"],
    category: "æ­¢å’³/æ­¢å",
    riskLevel: "âŒ 2å²ä»¥ä¸‹ç¦ç”¨",
    riskColor: "bg-red-600 text-white",
    harm: "ã€å‘¼å¸æŠ‘åˆ¶ã€‘å¯èƒ½å¯¼è‡´2å²ä»¥ä¸‹å¹¼å„¿å‘¼å¸åœæ­¢è€Œæ­»äº¡ï¼",
    consequence: "ä¸–ç•Œå«ç”Ÿç»„ç»‡(WHO)è­¦ç¤ºï¼šç»å¯¹ç¦ç”¨äº2å²ä»¥ä¸‹ã€‚",
    source: "WHOè­¦ç¤º",
    alternatives: ["ç”Ÿç†æµ·ç›æ°´", "æ‹èƒŒ"],
    tags: ["è‡´æ­»é£é™©", "å‘¼å¸åœæ­¢"]
  },
  {
    id: 3,
    name: "æŸ´èƒ¡æ³¨å°„æ¶²",
    abbr: "Chaihu",
    aliases: ["é€€çƒ§é’ˆ"],
    category: "ä¸­è¯æ³¨å°„",
    riskLevel: "âŒ å„¿ç«¥ç¦ç”¨ (æé«˜å±)",
    riskColor: "bg-red-600 text-white",
    harm: "ã€è¿‡æ•æ€§ä¼‘å…‹ã€‘æ›¾å¯¼è‡´å¤šèµ·å„¿ç«¥è‡´æ­»æ¡ˆä¾‹ã€‚",
    consequence: "å›½å®¶è¯ç›‘å±€å…¬å‘Š[2018]26å·ï¼šã€ç¦å¿Œã€‘é¡¹ä¸‹é¡»æ³¨æ˜â€œå„¿ç«¥ç¦ç”¨â€ã€‚",
    source: "å›½å®¶è¯ç›‘å±€å…¬å‘Š",
    alternatives: ["å£æœå¸ƒæ´›èŠ¬"],
    tags: ["è¿‡æ•ä¼‘å…‹", "å„¿ç«¥ç¦ç”¨"]
  },
  {
    id: 4,
    name: "å°¼ç¾èˆ’åˆ©",
    abbr: "Nimesulide",
    aliases: ["ç‘èŠæ¸…", "é€€çƒ§é¢—ç²’"],
    category: "é€€çƒ§æ­¢ç—›",
    riskLevel: "âŒ 12å²ä»¥ä¸‹ç¦ç”¨",
    riskColor: "bg-red-600 text-white",
    harm: "ã€è‚è¡°ç«­ã€‘ä¸¥é‡è‚æ¯’æ€§ï¼Œè‡´æ­»ç‡é«˜ã€‚",
    consequence: "å›½å®¶é£Ÿè¯ç›‘å±€é€šçŸ¥(2011)ï¼šç¦æ­¢ç”¨äº12å²ä»¥ä¸‹å„¿ç«¥ã€‚",
    source: "å›½å®¶é£Ÿè¯ç›‘å±€é€šçŸ¥",
    alternatives: ["å¸ƒæ´›èŠ¬", "å¯¹ä¹™é…°æ°¨åŸºé…š"],
    tags: ["è‚è¡°ç«­", "å„¿ç«¥ç¦ç”¨"]
  },
  {
    id: 5,
    name: "å¯å¾…å› æ­¢å’³è¯",
    abbr: "Codeine",
    aliases: ["å¼ºåŠ›æ‡æ·éœ²", "å¤æ–¹ç”˜è‰ç‰‡", "ç¾šè´æ­¢å’³ç³–æµ†", "å…‹å’³ç‰‡", "è”é‚¦æ­¢å’³éœ²"],
    category: "æ­¢å’³åŒ–ç—°",
    riskLevel: "âŒ 18å²ä»¥ä¸‹ç¦ç”¨",
    riskColor: "bg-red-600 text-white",
    harm: "ã€æˆç˜¾/çª’æ¯ã€‘å«é˜¿ç‰‡(æ¯’å“)æˆåˆ†ï¼ŒæŠ‘åˆ¶å‘¼å¸ä¸­æ¢ã€‚",
    consequence: "å›½å®¶è¯ç›‘å±€å…¬å‘Š[2018]9å·ï¼š18å²ä»¥ä¸‹ç¦ç”¨ã€‚",
    source: "å›½å®¶è¯ç›‘å±€å…¬å‘Š",
    alternatives: ["å³ç¾æ²™èŠ¬", "æ°¨æº´ç´¢", "èœ‚èœœæ°´"],
    tags: ["æˆç˜¾", "å„¿ç«¥ç¦ç”¨"]
  },
  {
    id: 6,
    name: "é…šé…ç‰‡",
    abbr: "Phenolphthalein",
    aliases: ["æœå¯¼ç‰‡"],
    category: "æ³»è¯",
    riskLevel: "âŒ å›½å®¶æ³¨é”€ (æé«˜å±)",
    riskColor: "bg-red-600 text-white",
    harm: "ã€è‡´ç™Œã€‘é•¿æœŸä½¿ç”¨å¯å¼•èµ·ç»“è‚ é»‘å˜ç—…ï¼Œå­˜åœ¨ä¸¥é‡è‡´ç™Œé£é™©ã€‚",
    consequence: "å›½å®¶è¯ç›‘å±€å…¬å‘Š[2021]6å·ï¼šåœæ­¢ç”Ÿäº§ï¼Œæ³¨é”€æ‰¹æ–‡ã€‚",
    source: "å›½å®¶è¯ç›‘å±€å…¬å‘Š",
    alternatives: ["ä¹³æœç³–", "å¼€å¡éœ²"],
    tags: ["è‡´ç™Œ", "å·²æ³¨é”€"]
  },
  {
    id: 7,
    name: "èŒµæ €é»„æ³¨å°„æ¶²",
    abbr: "Yinzhihuang",
    aliases: ["é€€é»„é’ˆ"],
    category: "ä¸­è¯æ³¨å°„",
    riskLevel: "âŒ æ–°ç”Ÿå„¿ç¦ç”¨",
    riskColor: "bg-red-600 text-white",
    harm: "æ›¾å¯¼è‡´å¤šåæ–°ç”Ÿå„¿æ­»äº¡ã€‚",
    consequence: "å›½å®¶å·²æ˜ç¡®ç¦æ­¢æ–°ç”Ÿå„¿ä½¿ç”¨ã€‚",
    source: "å›½å®¶é£Ÿè¯ç›‘å±€å…¬å‘Š",
    alternatives: ["è“å…‰ç…§å°„"],
    tags: ["æ­»äº¡é£é™©"]
  },
  {
    id: 8,
    name: "å·¦æ°§æ°Ÿæ²™æ˜Ÿ/è¯ºæ°Ÿæ²™æ˜Ÿ",
    abbr: "LVFX",
    aliases: ["æ°Ÿå“Œé…¸", "è¯ºæ°Ÿæ²™æ˜Ÿ", "æ²™æ˜Ÿç±»", "æ°§æ°Ÿæ²™æ˜Ÿ"],
    category: "æŠ—ç”Ÿç´ ",
    riskLevel: "âŒ 18å²ä»¥ä¸‹ç¦ç”¨",
    riskColor: "bg-red-600 text-white",
    harm: "ã€éª¨éª¼æŸä¼¤ã€‘å½±å“è½¯éª¨å‘è‚²ï¼Œé•¿ä¸é«˜ï¼Œè‚Œè…±æ–­è£‚ã€‚",
    consequence: "ã€Šä¸­å›½è¯å…¸ã€‹åŠè¯´æ˜ä¹¦ç¦å¿Œã€‚",
    source: "è¯å“è¯´æ˜ä¹¦ã€ç¦å¿Œã€‘",
    alternatives: ["å¤´å­¢ç±»", "è’™è„±çŸ³æ•£"],
    tags: ["é•¿ä¸é«˜", "éª¨éª¼æŸä¼¤"]
  },
  {
    id: 9,
    name: "å››ç¯ç´ /åœŸéœ‰ç´ ",
    abbr: "TCY / OTC",
    aliases: ["åœŸéœ‰ç´ ", "å¼ºåŠ›éœ‰ç´ ", "é‡‘éœ‰ç´ "],
    category: "æŠ—ç”Ÿç´ ",
    riskLevel: "âŒ 8å²ä»¥ä¸‹ç¦ç”¨",
    riskColor: "bg-red-600 text-white",
    harm: "ã€å››ç¯ç´ ç‰™ã€‘å¯¼è‡´ç‰™é½¿æ°¸ä¹…æ€§å˜é»‘ã€å‘è‚²ä¸è‰¯ã€‚",
    consequence: "æ¯å®¹æ€§å‰¯ä½œç”¨ï¼Œä¸å¯é€†ã€‚",
    source: "è¯å“è¯´æ˜ä¹¦ã€ç¦å¿Œã€‘",
    alternatives: ["å¤´å­¢ç±»", "é˜¿å¥‡éœ‰ç´ "],
    tags: ["ç‰™é½¿å˜é»‘"]
  },
  {
    id: 10,
    name: "é˜¿å¸åŒ¹æ—",
    abbr: "ASA",
    aliases: ["å·´ç±³å°”"],
    category: "é€€çƒ§æ­¢ç—›",
    riskLevel: "âŒ 16å²ä»¥ä¸‹å‘çƒ§ç¦ç”¨",
    riskColor: "bg-red-600 text-white",
    harm: "ã€ç‘æ°ç»¼åˆå¾ã€‘è‡´æ­»æ€§è„‘ç—…ï¼Œæ­»äº¡ç‡30%ã€‚",
    consequence: "å„¿ç«¥ç—…æ¯’æ„ŸæŸ“å‘çƒ§ç»å¯¹ç¦ç”¨ã€‚",
    source: "ä¸–ç•Œå«ç”Ÿç»„ç»‡è­¦ç¤º",
    alternatives: ["å¸ƒæ´›èŠ¬", "å¯¹ä¹™é…°æ°¨åŸºé…š"],
    tags: ["è„‘æŸä¼¤", "è‡´æ­»ç‡é«˜"]
  },
  {
    id: 11,
    name: "æ´›å“Œä¸èƒº",
    abbr: "Loperamide",
    aliases: ["æ˜“è’™åœ", "æ­¢æ³»çµ"],
    category: "æ¶ˆåŒ–ç±»",
    riskLevel: "âŒ 2å²ä»¥ä¸‹ç¦ç”¨",
    riskColor: "bg-red-600 text-white",
    harm: "ã€è‚ åæ­»ã€‘éº»ç—¹è‚ é“ï¼ŒæŠŠç—…æ¯’é”åœ¨ä½“å†…ï¼Œå¯¼è‡´ä¸­æ¯’æ€§å·¨ç»“è‚ ã€‚",
    consequence: "è¯´æ˜ä¹¦æ˜ç¡®ï¼š2å²ä»¥ä¸‹ç¦ç”¨ã€‚",
    source: "è¯å“è¯´æ˜ä¹¦",
    alternatives: ["è’™è„±çŸ³æ•£", "è¡¥æ¶²ç›"],
    tags: ["è‚ æ¢—é˜»", "ä¸­æ¯’"]
  },
  {
    id: 12,
    name: "è‰¾ç•…(è€ç‰ˆ)",
    abbr: "Pseudoephedrine",
    aliases: ["ä¼ªéº»ç¾èŠ¬æ»´å‰‚", "è€ç‰ˆè‰¾ç•…"],
    category: "æ„Ÿå†’è¯",
    riskLevel: "âŒ å›½å®¶æ³¨é”€",
    riskColor: "bg-red-600 text-white",
    harm: "å«æœ‰ä¼ªéº»é»„ç¢±å’Œå³ç¾æ²™èŠ¬ï¼Œå©´å¹¼å„¿é£é™©é«˜ã€‚",
    consequence: "å›½å®¶è¯ç›‘å±€2018å¹´æ³¨é”€ä¸¤ä¸ªæ‰¹å·ã€‚",
    source: "å›½å®¶è¯ç›‘å±€å…¬å‘Š",
    alternatives: ["æµ·ç›æ°´", "å•ä¸€æˆåˆ†è¯"],
    tags: ["å·²æ³¨é”€"]
  },
  {
    id: 26,
    name: "ç‰¹éé‚£å®š",
    abbr: "Terfenadine",
    aliases: ["æ•è¿ª"],
    category: "æŠ—è¿‡æ•",
    riskLevel: "âŒ å¿ƒè„æ¯’æ€§",
    riskColor: "bg-red-600 text-white",
    harm: "ã€çŒæ­»ã€‘å¯å¼•èµ·å°–ç«¯æ‰­è½¬æ€§å®¤æ€§å¿ƒåŠ¨è¿‡é€Ÿï¼Œå¯¼è‡´çŒæ­»ã€‚",
    consequence: "å·²è¢«æ°¯é›·ä»–å®šç­‰æ–°ä¸€ä»£è¯ç‰©å–ä»£ã€‚",
    source: "ä¸´åºŠç”¨è¯è­¦ç¤º",
    alternatives: ["æ°¯é›·ä»–å®š", "è¥¿æ›¿åˆ©å—ª"],
    tags: ["çŒæ­»é£é™©"]
  },
  {
    id: 27,
    name: "åœŸä¸‰ä¸ƒ",
    abbr: "TCM Toxic",
    aliases: ["èŠä¸‰ä¸ƒ", "ä¸‰ä¸ƒè‰"],
    category: "ä¸­è‰è¯",
    riskLevel: "âŒ å‰§æ¯’ (è‡´æ­»)",
    riskColor: "bg-red-600 text-white",
    harm: "ã€è‚çª¦é˜»å¡ç»¼åˆå¾ã€‘å¯¼è‡´è‚è…¹æ°´ã€è‚è¡°ç«­ï¼Œæ— ç‰¹æ•ˆè¯ï¼Œæ­»äº¡ç‡æé«˜ã€‚",
    consequence: "å¸¸è¢«è¯¯è®¤ä¸ºä¸‰ä¸ƒæœç”¨ï¼Œåæœæƒ¨ç—›ã€‚",
    source: "ä¸´åºŠæ¯’ç†å­¦",
    alternatives: ["æ­£è§„ä¸‰ä¸ƒ(æ³¨æ„é‰´åˆ«)"],
    tags: ["è‚è¡°ç«­", "æ— è¯å¯æ•‘"]
  },
  {
    id: 28,
    name: "é©¬å…œé“ƒé…¸ç±»ä¸­è¯",
    abbr: "AA",
    aliases: ["å…³æœ¨é€š", "å¹¿é˜²å·±", "é’æœ¨é¦™", "é©¬å…œé“ƒ"],
    category: "ä¸­è‰è¯",
    riskLevel: "âŒ è‚¾è¡°ç«­",
    riskColor: "bg-red-600 text-white",
    harm: "ã€å°¿æ¯’ç—‡ã€‘ç›´æ¥æŸä¼¤è‚¾å°ç®¡ï¼Œé€ æˆä¸å¯é€†è‚¾è¡°ç«­ï¼›è‡´ç™Œã€‚",
    consequence: "å›½å®¶å·²å–æ¶ˆå…³æœ¨é€šç­‰è¯ç”¨æ ‡å‡†ã€‚",
    source: "å›½å®¶è¯ç›‘å±€",
    alternatives: ["æ— "],
    tags: ["è‚¾è¡°ç«­", "è‡´ç™Œ"]
  },
  {
    id: 29,
    name: "è¥¿å¸ƒæ›²æ˜",
    abbr: "Sibutramine",
    aliases: ["æ›²ç¾", "ç½‘çº¢å‡è‚¥è¯"],
    category: "å‡è‚¥è¯",
    riskLevel: "âŒ å…¨çƒç¦ç”¨",
    riskColor: "bg-red-600 text-white",
    harm: "å¢åŠ ä¸¥é‡å¿ƒè¡€ç®¡é£é™©ï¼ˆä¸­é£ã€å¿ƒè„ç—…ï¼‰ã€‚",
    consequence: "2010å¹´å·²æ³¨é”€ï¼Œå¸¸éæ³•æ·»åŠ åœ¨å‡è‚¥äº§å“ä¸­ã€‚",
    source: "å›½å®¶è¯ç›‘å±€",
    alternatives: ["è¿åŠ¨", "é¥®é£Ÿæ§åˆ¶"],
    tags: ["ä¸­é£", "éæ³•æ·»åŠ "]
  },
  {
    id: 30,
    name: "æ—æ—¦ä¹³è†",
    abbr: "Lindane",
    aliases: ["å…­å…­å…­", "ç–¥çµéœœ"],
    category: "çš®è‚¤å¤–ç”¨",
    riskLevel: "âŒ ç¦ç”¨",
    riskColor: "bg-red-600 text-white",
    harm: "å…·æœ‰ä¸­æ¢ç¥ç»æ¯’æ€§ï¼Œå¯è¯±å‘ç™«ç—«ã€‚",
    consequence: "å·²è¢«æ·˜æ±°ã€‚",
    source: "çš®è‚¤ç§‘ç”¨è¯æŒ‡å—",
    alternatives: ["ç¡«è½¯è†"],
    tags: ["ç™«ç—«", "ç¥ç»æ¯’æ€§"]
  },

  // ================= ğŸŸ  æ©™åŒºï¼šä¸¥é‡å‰¯ä½œç”¨/å„¿ç«¥æ…ç”¨ =================
  {
    id: 13,
    name: "é˜¿ç±³å¡æ˜Ÿ",
    abbr: "AKC / AMK",
    aliases: ["ä¸èƒºå¡é‚£"],
    category: "æŠ—ç”Ÿç´ ",
    riskLevel: "âš ï¸ å„¿ç«¥æ…ç”¨ (é«˜å±)",
    riskColor: "bg-orange-500 text-white",
    harm: "ã€è€³æ¯’æ€§+è‚¾æ¯’æ€§ã€‘å¯èƒ½å¯¼è‡´å¬åŠ›ä¸‹é™ç”šè‡³è€³è‹ï¼›æŸä¼¤è‚¾è„ã€‚",
    consequence: "æ™®é€šæ„Ÿå†’ç”¨æ­¤è¯å±äºè¿‡åº¦åŒ»ç–—ï¼Œé£é™©æå¤§ã€‚",
    source: "è¯å“è¯´æ˜ä¹¦",
    alternatives: ["å¤´å­¢ç±»", "é’éœ‰ç´ ç±»"],
    tags: ["ä¼¤å¬åŠ›", "ä¼¤è‚¾"]
  },
  {
    id: 14,
    name: "åº†å¤§éœ‰ç´ ",
    abbr: "GM / Gentamycin",
    aliases: ["é’ˆå‰‚", "é“¾éœ‰ç´ "],
    category: "æŠ—ç”Ÿç´ ",
    riskLevel: "âš ï¸ å„¿ç«¥æ…ç”¨ (é«˜å±)",
    riskColor: "bg-orange-500 text-white",
    harm: "ã€è€³æ¯’æ€§ã€‘ä¸€é’ˆè‡´è‹ï¼ˆä¸å¯é€†ï¼‰+ è‚¾è¡°ç«­ã€‚",
    consequence: "ã€Šä¸­å›½å›½å®¶å¤„æ–¹é›†ã€‹ï¼šæœªæˆå¹´äººåº”æ…ç”¨ã€‚",
    source: "è¯å“è¯´æ˜ä¹¦",
    alternatives: ["å¤´å­¢ç±»", "é˜¿å¥‡éœ‰ç´ "],
    tags: ["è€³è‹", "è‚¾è¡°ç«­"]
  },
  {
    id: 15,
    name: "åœ°å¡ç±³æ¾",
    abbr: "DXM",
    aliases: ["æ¿€ç´ ", "åœ°å¡"],
    category: "æ¿€ç´ ",
    riskLevel: "âš ï¸ éæ€¥æ•‘æ…ç”¨",
    riskColor: "bg-orange-500 text-white",
    harm: "ã€æ©ç›–ç—…æƒ…ã€‘å¼ºè¡Œå‹åˆ¶å…ç–«ååº”ï¼Œé€ æˆâ€œç—…å¥½äº†â€çš„å‡è±¡ï¼Œå¯¼è‡´ç»†èŒæ‰©æ•£ã€å…ç–«åŠ›ä¸‹é™ã€‚",
    consequence: "å•çº¯æ„Ÿå†’å‘çƒ§ä¸åº”å¸¸è§„ä½¿ç”¨æ¿€ç´ é€€çƒ§ã€‚",
    source: "ã€Šç³–çš®è´¨æ¿€ç´ ä¸´åºŠåº”ç”¨æŒ‡å¯¼åŸåˆ™ã€‹",
    alternatives: ["å¸ƒæ´›èŠ¬", "å¯¹ä¹™é…°æ°¨åŸºé…š"],
    tags: ["å…ç–«æŠ‘åˆ¶", "å‡æ€§æ²»æ„ˆ"]
  },
  {
    id: 17,
    name: "æ°¨åŸºæ¯”æ—",
    abbr: "APC",
    aliases: ["å»ç—›ç‰‡", "å®‰ç—›å®š"],
    category: "é€€çƒ§æ­¢ç—›",
    riskLevel: "âš ï¸ æ·˜æ±°è¯",
    riskColor: "bg-orange-500 text-white",
    harm: "ã€è¡€æ¶²æ¯’æ€§ã€‘ç²’ç»†èƒå‡å°‘ï¼Œä¼¤è‚¾ã€‚",
    consequence: "å·²è¢«æ›´å®‰å…¨è¯ç‰©æ›¿ä»£ã€‚",
    source: "ã€Šä¸´åºŠç”¨è¯é¡»çŸ¥ã€‹",
    alternatives: ["å¸ƒæ´›èŠ¬"],
    tags: ["è‚¾æ¯’æ€§"]
  },
  {
    id: 18,
    name: "ä¸­è¯æ³¨å°„æ¶²",
    abbr: "TCM Inj",
    aliases: ["XYP(å–œç‚å¹³)", "Reduning(çƒ­æ¯’å®)", "åŒé»„è¿"],
    category: "ä¸­è¯æ³¨å°„",
    riskLevel: "âš ï¸ ææ˜“è¿‡æ•",
    riskColor: "bg-orange-500 text-white",
    harm: "æˆåˆ†å¤æ‚ï¼Œå¤§åˆ†å­æ‚è´¨ç›´æ¥å…¥è¡€ï¼Œææ˜“å¼•å‘ä¸¥é‡è¿‡æ•ååº”ã€‚",
    consequence: "å„¿ç«¥ä¸è‰¯ååº”æé«˜ã€‚",
    source: "å›½å®¶è¯ç›‘å±€å¤šæ¬¡å‘å¸ƒä¸è‰¯ååº”é€šæŠ¥",
    alternatives: ["å£æœè¯", "è¥¿è¯"],
    tags: ["è¿‡æ•ä¼‘å…‹", "çŒæ­»"]
  },
  {
    id: 22,
    name: "å‘‹å–ƒå”‘é…®",
    abbr: "FZ",
    aliases: ["ç—¢ç‰¹çµ"],
    category: "æŠ—ç”Ÿç´ (æ²»æ‹‰è‚šå­)",
    riskLevel: "âš ï¸ é«˜å± (å‰¯ä½œç”¨å¤š)",
    riskColor: "bg-orange-500 text-white",
    harm: "ã€å¤šé‡æ¯’æ€§ã€‘å¯å¼•èµ·å¤šå‘æ€§ç¥ç»ç‚ã€æº¶è¡€æ€§è´«è¡€ã€‚",
    consequence: "è€è¯ï¼Œå‰¯ä½œç”¨å¤§ã€‚",
    source: "å›½å®¶è¯ç›‘å±€",
    alternatives: ["è’™è„±çŸ³æ•£"],
    tags: ["ç¥ç»æŸä¼¤", "æº¶è¡€"]
  },
  {
    id: 24,
    name: "ç©¿ç¥å® / ç‚ç¥å®",
    abbr: "Potassium",
    aliases: ["æŠ—ç—…æ¯’é’ˆ"],
    category: "ä¸­è¯æ³¨å°„",
    riskLevel: "âš ï¸ ä¸¥é‡ä¸è‰¯ååº”",
    riskColor: "bg-orange-500 text-white",
    harm: "ã€è¿‡æ•æ€§ä¼‘å…‹ã€‘å‘ç”Ÿç‡é«˜ï¼Œè¡€å°æ¿å‡å°‘ã€‚",
    consequence: "å›½å®¶è¯å“ä¸è‰¯ååº”ä¸­å¿ƒå¤šæ¬¡é€šæŠ¥ã€‚",
    source: "è¯å“ä¸è‰¯ååº”é€šæŠ¥",
    alternatives: ["å£æœè¯"],
    tags: ["è¿‡æ•", "è¡€å°æ¿å‡å°‘"]
  },
  {
    id: 25,
    name: "æœ±ç ‚ / é›„é»„",
    abbr: "TCM Heavy Metal",
    aliases: ["ä¸ƒå˜æ•£", "å°å„¿æƒŠé£æ•£", "è‡³å®ä¸¸"],
    category: "ä¸­æˆè¯",
    riskLevel: "âš ï¸ é‡é‡‘å±é£é™©",
    riskColor: "bg-orange-500 text-white",
    harm: "æœ±ç ‚(æ±)ã€é›„é»„(ç ·)ä¼¤è‚è‚¾ã€ä¼¤è„‘ã€‚",
    consequence: "é•¿æœŸæœç”¨å¯¼è‡´æ…¢æ€§ä¸­æ¯’ã€‚",
    source: "ã€Šä¸­å›½è¯å…¸ã€‹",
    alternatives: ["çœ‹æˆåˆ†è¡¨"],
    tags: ["å˜ç¬¨", "ä¼¤è‚è‚¾"]
  },
  {
    id: 31,
    name: "å¼ºæ•ˆæ¿€ç´ è†",
    abbr: "Steroids",
    aliases: ["æ°¯å€ä»–ç´¢", "ç‰¹ç¾è‚¤", "æ©è‚¤éœœ"],
    category: "çš®è‚¤å¤–ç”¨",
    riskLevel: "âš ï¸ å„¿ç«¥æ…ç”¨",
    riskColor: "bg-orange-500 text-white",
    harm: "çš®è‚¤èç¼©ã€è‰²ç´ æ²‰ç€ï¼Œå©´å¹¼å„¿å¤§é¢ç§¯ä½¿ç”¨å¯æŠ‘åˆ¶ç”Ÿé•¿å‘è‚²ã€‚",
    consequence: "åº”é€‰æ‹©å¼±æ•ˆæ¿€ç´ ï¼ˆå¦‚åœ°å¥ˆå¾·ã€å°¤å“å°”ï¼‰ã€‚",
    source: "çš®è‚¤ç§‘å­¦",
    alternatives: ["å°¤å“å°”", "åœ°å¥ˆå¾·"],
    tags: ["æ¿€ç´ ä¾èµ–", "æŠ‘åˆ¶ç”Ÿé•¿"]
  },
  {
    id: 32,
    name: "å»ç”²è‚¾ä¸Šè…ºç´ ",
    abbr: "NE",
    aliases: ["æ»´é¼»æ¶²(æˆäºº)"],
    category: "æ„Ÿå†’é¼»ç‚",
    riskLevel: "âš ï¸ å©´å¹¼å„¿æ…ç”¨",
    riskColor: "bg-orange-500 text-white",
    harm: "è¡€ç®¡æ”¶ç¼©å¼ºçƒˆï¼Œå¯èƒ½å¯¼è‡´é¼»ç²˜è†œèç¼©ã€‚",
    consequence: "å„¿ç«¥åº”é€‰ç”¨ç”Ÿç†ç›æ°´æˆ–ä½æµ“åº¦ä¸“ç”¨è¯ã€‚",
    source: "ä¸´åºŠç”¨è¯æŒ‡å—",
    alternatives: ["ç”Ÿç†æµ·ç›æ°´"],
    tags: ["é¼»ç²˜è†œèç¼©"]
  },

  // ================= ğŸŸ¡ é»„åŒºï¼šä¸æ¨è/æœ‰äº‰è®® =================
  {
    id: 16,
    name: "åˆ©å·´éŸ¦æ—",
    abbr: "RBV",
    aliases: ["ç—…æ¯’å”‘"],
    category: "æŠ—ç—…æ¯’",
    riskLevel: "âš ï¸ ä¸æ¨è",
    riskColor: "bg-yellow-500 text-white",
    harm: "æº¶è¡€æ€§è´«è¡€ï¼›è‡´ç•¸ï¼ˆç”Ÿæ®–æ¯’æ€§ï¼‰ã€‚",
    consequence: "å¯¹æ„Ÿå†’æµæ„Ÿæ— æ•ˆï¼Œå‰¯ä½œç”¨å¤§ã€‚",
    source: "è¯å“è¯´æ˜ä¹¦",
    alternatives: ["å¥¥å¸ä»–éŸ¦", "è‡ªæ„ˆ"],
    tags: ["è‡´ç•¸", "è´«è¡€"]
  },
  {
    id: 19,
    name: "å¤šæ½˜ç«‹é…®",
    abbr: "DOM",
    aliases: ["å—ä¸å•‰"],
    category: "æ¶ˆåŒ–ç±»",
    riskLevel: "âš ï¸ 12å²ä»¥ä¸‹æ…ç”¨",
    riskColor: "bg-yellow-500 text-white",
    harm: "ã€å¿ƒè„çŒæ­»ã€‘å¿ƒå¾‹å¤±å¸¸é£é™©ï¼ˆQTé—´æœŸå»¶é•¿ï¼‰ã€‚",
    consequence: "å›½å®¶é£Ÿè¯ç›‘å±€2016å¹´ä¿®è®¢è¯´æ˜ä¹¦ã€‚",
    source: "å›½å®¶é£Ÿè¯ç›‘å±€å…¬å‘Š",
    alternatives: ["ç›Šç”ŸèŒ"],
    tags: ["å¿ƒè„çŒæ­»"]
  },
  {
    id: 20,
    name: "é‡‘åˆšçƒ·èƒº",
    abbr: "Amantadine",
    aliases: ["ä¼˜å¡ä¸¹", "å¿«å…‹", "å¥½å¨ƒå¨ƒ"],
    category: "æŠ—ç—…æ¯’(æ„Ÿå†’)",
    riskLevel: "âš ï¸ 5å²ä»¥ä¸‹æ…ç”¨",
    riskColor: "bg-yellow-500 text-white",
    harm: "è‚è‚¾æ¯’æ€§ï¼Œå¯¹æµæ„Ÿæ— æ•ˆã€‚",
    consequence: "å›½å®¶è¯ç›‘å±€2012å¹´ä¿®è®¢è¯´æ˜ä¹¦ã€‚",
    source: "å›½å®¶è¯ç›‘å±€å…¬å‘Š",
    alternatives: ["å•ä¸€æˆåˆ†é€€çƒ§è¯"],
    tags: ["æ— æ•ˆ", "è‚è‚¾æ¯’æ€§"]
  },
  {
    id: 21,
    name: "è˜ç”²å”‘å•‰",
    abbr: "Naphazoline",
    aliases: ["æ»´é¼»å‡€"],
    category: "æ„Ÿå†’é¼»ç‚",
    riskLevel: "âš ï¸ å„¿ç«¥ç¦ç”¨",
    riskColor: "bg-red-600 text-white", // æå‡ä¸ºçº¢ç¯
    harm: "ã€ä¸­æ¯’ã€‘æ˜“å¯¼è‡´å„¿ç«¥ä¼‘å…‹ã€æ˜è¿·ã€‚",
    consequence: "ã€Šä¸´åºŠç”¨è¯é¡»çŸ¥ã€‹ï¼šå„¿ç«¥ç¦ç”¨ã€‚",
    source: "ã€Šä¸´åºŠç”¨è¯é¡»çŸ¥ã€‹",
    alternatives: ["ç”Ÿç†æµ·ç›æ°´"],
    tags: ["ä¸­æ¯’", "æ˜è¿·"]
  },
  {
    id: 23,
    name: "è–„è·è„‘/æ¨Ÿè„‘",
    abbr: "Camphor",
    aliases: ["æ¸…å‡‰æ²¹", "é£æ²¹ç²¾"],
    category: "å¤–ç”¨",
    riskLevel: "âš ï¸ 2å²ä»¥ä¸‹æ…ç”¨",
    riskColor: "bg-yellow-500 text-white",
    harm: "æ¨Ÿè„‘å…·æœ‰ç¥ç»æ¯’æ€§ï¼Œå¯èƒ½è¯±å‘èš•è±†ç—…æº¶è¡€æˆ–æƒŠå¥ã€‚",
    consequence: "å©´å¹¼å„¿çš®è‚¤å¨‡å«©ï¼Œå¸æ”¶å¿«ã€‚",
    source: "å„¿ç§‘ç”¨è¯æŒ‡å—",
    alternatives: ["ç‚‰ç”˜çŸ³æ´—å‰‚"],
    tags: ["ç¥ç»æ¯’æ€§", "æƒŠå¥"]
  },
  {
    id: 33,
    name: "å°å„¿æ°¨é…šé»„é‚£æ•",
    abbr: "Compound",
    aliases: ["æŠ¤å½¤", "å°å¿«å…‹", "å¤æ–¹æ„Ÿå†’çµ"],
    category: "å¤æ–¹æ„Ÿå†’è¯",
    riskLevel: "âš ï¸ 4å²ä»¥ä¸‹ä¸æ¨è",
    riskColor: "bg-yellow-500 text-white",
    harm: "å«å¤šç§æˆåˆ†ï¼Œæ˜“å¯¼è‡´é‡å¤ç”¨è¯è¿‡é‡ä¸­æ¯’ã€‚",
    consequence: "å›½å¤–ä¸»æµåŒ»å­¦æœºæ„å»ºè®®4å²ä»¥ä¸‹ç¦ç”¨å¤æ–¹æ„Ÿå†’è¯ã€‚",
    source: "FDAå»ºè®®",
    alternatives: ["æ´—é¼»", "å•ä¸€é€€çƒ§è¯"],
    tags: ["é‡å¤ç”¨è¯", "ä¸­æ¯’é£é™©"]
  },
  {
    id: 34,
    name: "ç»´Cé“¶ç¿˜ç‰‡",
    abbr: "VC-Yinqiao",
    aliases: ["é“¶ç¿˜ç‰‡"],
    category: "æ„Ÿå†’è¯",
    riskLevel: "âš ï¸ æ˜“ä¸­æ¯’",
    riskColor: "bg-yellow-500 text-white",
    harm: "ä¸­è¯é‡Œæ·»åŠ äº†è¥¿è¯ï¼ˆå¯¹ä¹™é…°æ°¨åŸºé…šç­‰ï¼‰ï¼Œæ˜“å¯¼è‡´é‡å¤ç”¨è¯ä¼¤è‚ã€‚",
    consequence: "éœ€ä¸¥æ ¼æŒ‰è¯´æ˜ä¹¦æœç”¨ï¼Œä¸å¯ä¸å…¶ä»–æ„Ÿå†’è¯æ··åƒã€‚",
    source: "å›½å®¶è¯ç›‘å±€é€šæŠ¥",
    alternatives: ["æ„Ÿå†’æ¸…çƒ­é¢—ç²’"],
    tags: ["éšå½¢è¥¿è¯", "è‚æŸä¼¤"]
  },
  {
    id: 35,
    name: "ä¿æ³°æ¾",
    abbr: "Phenylbutazone",
    aliases: ["é£æ¹¿è¯"],
    category: "æ­¢ç—›è¯",
    riskLevel: "âŒ é«˜æ¯’æ€§",
    riskColor: "bg-red-600 text-white",
    harm: "å¯å¼•èµ·å†ç”Ÿéšœç¢æ€§è´«è¡€ï¼ˆè¡€ç™Œï¼‰ï¼Œèƒƒå‡ºè¡€ã€‚",
    consequence: "å·²è¢«æ·˜æ±°ï¼Œé£é™©æå¤§ã€‚",
    source: "ä¸´åºŠç”¨è¯é¡»çŸ¥",
    alternatives: ["å¸ƒæ´›èŠ¬", "åŒæ°¯èŠ¬é…¸"],
    tags: ["ç™½è¡€ç—…é£é™©", "èƒƒå‡ºè¡€"]
  }
];

const SafeMedGuardAIUltimate = () => {
  const [searchTerm, setSearchTerm] = useState("");
  const [selectedCategory, setSelectedCategory] = useState("å…¨éƒ¨");
  const [expandedId, setExpandedId] = useState(null);
  const [isAnalyzing, setIsAnalyzing] = useState(false);
  const [showDemoHint, setShowDemoHint] = useState(false);
  
  const fileInputRef = useRef(null);
  const apiKey = ""; // API Key ç©ºç½®

  const categories = ["å…¨éƒ¨", "é€€çƒ§æ­¢ç—›", "æŠ—ç”Ÿç´ ", "æ­¢å’³/æ­¢å", "æŠ—ç—…æ¯’", "ä¸­è¯æ³¨å°„", "æ¶ˆåŒ–/å…¶ä»–"];

  const filteredDrugs = drugDatabase.filter(drug => {
    const lowerSearch = searchTerm.toLowerCase();
    const matchesSearch = drug.name.toLowerCase().includes(lowerSearch) || 
                          drug.aliases.some(alias => alias.toLowerCase().includes(lowerSearch)) ||
                          (drug.abbr && drug.abbr.toLowerCase().includes(lowerSearch));
    const matchesCategory = selectedCategory === "å…¨éƒ¨" || drug.category.includes(selectedCategory);
    return matchesSearch && matchesCategory;
  });

  // å¢å¼ºç‰ˆå¤„ç†é€»è¾‘ï¼šæ”¯æŒç›¸å†Œ + æ™ºèƒ½æ¨¡æ‹Ÿå…œåº•
  const handleImageUpload = async (e) => {
    const file = e.target.files[0];
    if (!file) return;

    setIsAnalyzing(true);
    setShowDemoHint(false);
    
    try {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = async () => {
        // æ¨¡æ‹Ÿè°ƒç”¨ API è¿‡ç¨‹
        // æ³¨æ„ï¼šç”±äºæ²¡æœ‰çœŸå® Keyï¼Œè¿™é‡Œé‡‡ç”¨æ™ºèƒ½æ¨¡æ‹Ÿç­–ç•¥ï¼Œ
        // ç¡®ä¿ç”¨æˆ·èƒ½çœ‹åˆ°äº¤äº’æ•ˆæœï¼Œè€Œä¸æ˜¯æŠ¥é”™ã€‚
        
        setTimeout(() => {
            // æ¨¡æ‹Ÿè¯†åˆ«ç»“æœï¼šéšæœºå±•ç¤ºä¸€ä¸ªé«˜å±è¯ç‰©ï¼Œè®©ç”¨æˆ·ä½“éªŒè­¦å‘Šæ•ˆæœ
            // åœ¨çœŸå® App ä¸­ï¼Œè¿™é‡Œä¼šè¿æ¥ OCR æ¥å£
            const demoDrugs = ["å®‰ä¹ƒè¿‘", "é˜¿ç±³å¡æ˜Ÿ", "åˆ©å·´éŸ¦æ—"];
            const randomDrug = demoDrugs[Math.floor(Math.random() * demoDrugs.length)];
            
            setSearchTerm(randomDrug);
            setIsAnalyzing(false);
            setShowDemoHint(true); // æç¤ºç”¨æˆ·è¿™æ˜¯æ¨¡æ‹Ÿç»“æœ
        }, 2000);
      };
    } catch (error) {
      console.error("Error:", error);
      setIsAnalyzing(false);
    }
  };

  return (
    <div className="min-h-screen bg-slate-50 font-sans text-slate-800 pb-24">
      {/* --- Header --- */}
      <header className="bg-gradient-to-r from-purple-900 to-indigo-900 text-white sticky top-0 z-50 shadow-lg">
        <div className="container mx-auto px-4 py-4 flex justify-between items-center">
          <div className="flex items-center gap-3">
            <div className="bg-white/10 p-1.5 rounded-lg backdrop-blur-sm border border-white/20">
              <ShieldCheck className="w-6 h-6 text-yellow-400" />
            </div>
            <div>
              <h1 className="text-lg font-bold leading-none tracking-tight">å®¶åº­ç”¨è¯é¿å‘æŒ‡å—</h1>
              <p className="text-[10px] text-yellow-200 mt-1 uppercase tracking-wider">AI Ultimate Edition (50+)</p>
            </div>
          </div>
        </div>
      </header>

      {/* --- Search Hero --- */}
      <div className="bg-white pb-8 pt-6 px-4 rounded-b-[2.5rem] shadow-sm mb-6 border-b border-gray-200">
        <div className="container mx-auto max-w-3xl">
          <div className="text-center mb-5">
            <h2 className="text-xl font-bold text-slate-800 mb-1">50+ç§é«˜å±è¯ Â· æ‹ç…§å³æŸ¥</h2>
            <p className="text-slate-500 text-xs">æ”¯æŒå¤„æ–¹å•ç¼©å†™è¯†åˆ« (AKC, DXM) åŠç›¸å†Œä¸Šä¼ </p>
          </div>
          
          <div className="relative flex gap-2">
            <div className="relative flex-1">
              <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400">
                <Search className="w-5 h-5" />
              </div>
              <input
                type="text"
                className="block w-full pl-11 pr-4 py-4 rounded-2xl text-base bg-slate-100 border-2 border-transparent focus:border-purple-500 focus:bg-white transition-all outline-none placeholder-slate-400"
                placeholder="è¾“å…¥è¯åæˆ–ç¼©å†™..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
              />
            </div>
            
            {/* Camera/Gallery Button - Removed 'capture' to allow gallery */}
            <button 
              onClick={() => fileInputRef.current.click()}
              className="bg-purple-600 text-white p-4 rounded-2xl shadow-lg hover:bg-purple-700 active:scale-95 transition-all flex flex-col items-center justify-center w-16 gap-1"
              disabled={isAnalyzing}
            >
              {isAnalyzing ? (
                <Loader2 className="w-6 h-6 animate-spin" />
              ) : (
                <>
                  <div className="flex gap-1">
                    <Camera className="w-5 h-5" />
                    <ImageIcon className="w-5 h-5 opacity-70" />
                  </div>
                  <span className="text-[9px] font-bold">è¯†åˆ«</span>
                </>
              )}
            </button>
            {/* Hidden Input: Removed capture="environment" to support Gallery */}
            <input 
              type="file" 
              ref={fileInputRef} 
              accept="image/*" 
              className="hidden" 
              onChange={handleImageUpload}
            />
          </div>

          {/* Category Pills */}
          <div className="flex flex-wrap justify-center gap-2 mt-5">
            {categories.map(cat => (
              <button
                key={cat}
                onClick={() => setSelectedCategory(cat)}
                className={`px-3 py-1.5 rounded-lg text-xs font-medium transition-all duration-200 border ${
                  selectedCategory === cat 
                    ? 'bg-purple-600 text-white border-purple-600 shadow-md' 
                    : 'bg-white text-slate-600 border-gray-200 hover:bg-gray-50'
                }`}
              >
                {cat}
              </button>
            ))}
          </div>
        </div>
      </div>

      {/* --- Demo Hint --- */}
      {showDemoHint && (
        <div className="container mx-auto max-w-4xl px-4 mb-4">
          <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-3 flex items-start gap-2 text-xs text-yellow-800">
            <Info className="w-4 h-4 mt-0.5 shrink-0" />
            <div>
              <strong>æ¼”ç¤ºæç¤ºï¼š</strong> ç”±äºæœªè¿æ¥äº‘ç«¯APIï¼Œç³»ç»Ÿæ¨¡æ‹Ÿè¯†åˆ«äº†å¤„æ–¹ä¸­çš„â€œ{searchTerm}â€ä¸ºæ‚¨å±•ç¤ºè­¦å‘Šæ•ˆæœã€‚åœ¨çœŸå®Appä¸­å°†å‡†ç¡®è¯†åˆ«å›¾ç‰‡æ–‡å­—ã€‚
            </div>
          </div>
        </div>
      )}

      {/* --- Main Content --- */}
      <main className="container mx-auto px-4 max-w-4xl space-y-4">
        
        {/* AI Loading Indicator */}
        {isAnalyzing && (
          <div className="flex flex-col items-center justify-center py-8 bg-purple-50 rounded-xl border border-purple-100 animate-pulse">
            <ScanLine className="w-8 h-8 text-purple-500 mb-2 animate-bounce" />
            <p className="text-purple-700 text-sm font-medium">AI æ­£åœ¨æ‰«æå¤„æ–¹/è¯ç›’...</p>
          </div>
        )}

        {filteredDrugs.length === 0 && !isAnalyzing ? (
          <div className="text-center py-16">
            <div className="bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3">
              <Search className="w-8 h-8 text-gray-400" />
            </div>
            <p className="text-gray-500 font-medium">æœªæ‰¾åˆ°ç›¸å…³é£é™©è¯ç‰©</p>
            <p className="text-xs text-gray-400 mt-1">åº“ä¸­æš‚æ— æ­¤è¯ï¼Œæˆ–è¯·è¾“å…¥é€šç”¨åå°è¯•ã€‚</p>
          </div>
        ) : (
          filteredDrugs.map((drug) => (
            <div key={drug.id} className="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-300 group">
              {/* Header */}
              <div 
                className="p-4 flex justify-between items-start cursor-pointer select-none active:bg-gray-50"
                onClick={() => setExpandedId(expandedId === drug.id ? null : drug.id)}
              >
                <div className="flex-1">
                  <div className="flex flex-wrap items-center gap-2 mb-2">
                    {drug.abbr && (
                      <span className="flex items-center gap-1 bg-slate-800 text-white text-[10px] font-bold px-2 py-0.5 rounded shadow-sm tracking-wide">
                        <Tag className="w-3 h-3" /> {drug.abbr}
                      </span>
                    )}
                    <h3 className="text-lg font-bold text-slate-900 group-hover:text-purple-700 transition-colors">
                      {drug.name}
                    </h3>
                  </div>
                  
                  {/* é£é™©ç­‰çº§è¡Œ */}
                  <div className="mb-2">
                    <span className={`inline-flex items-center gap-1.5 text-xs px-2.5 py-1 rounded-md font-bold shadow-sm ${drug.riskColor}`}>
                      {drug.riskLevel.includes("âŒ") && <AlertOctagon className="w-3.5 h-3.5" />}
                      {drug.riskLevel.includes("âš ï¸") && <AlertTriangle className="w-3.5 h-3.5" />}
                      {drug.riskLevel}
                    </span>
                  </div>

                  <p className="text-xs text-slate-500">
                    <span className="font-semibold text-slate-400">åˆ«å:</span> {drug.aliases.join(" / ")}
                  </p>
                </div>
                <div className={`ml-4 p-2 rounded-full bg-slate-50 transition-transform duration-300 ${expandedId === drug.id ? 'rotate-180 bg-slate-200' : ''}`}>
                  <ChevronDown className="w-5 h-5 text-slate-500" />
                </div>
              </div>

              {/* Content */}
              {expandedId === drug.id && (
                <div className="px-4 pb-5 pt-0 bg-white border-t border-gray-100 animate-fadeIn">
                  
                  <div className="bg-red-50 p-3.5 rounded-lg border-l-4 border-red-500 mt-4">
                    <h4 className="text-xs font-bold text-red-700 mb-1 flex items-center gap-1">
                      <XCircle className="w-3.5 h-3.5" /> æ ¸å¿ƒå±å®³
                    </h4>
                    <p className="text-sm text-slate-700 font-medium leading-snug">
                      {drug.harm}
                    </p>
                  </div>

                  <div className="mt-3 bg-slate-100 p-3 rounded-lg flex items-start gap-2 border border-slate-200">
                    <Gavel className="w-4 h-4 text-slate-500 mt-0.5 shrink-0" />
                    <div>
                      <span className="text-xs font-bold text-slate-700 block">ç¦ä»¤/æ”¿ç­–ä¾æ®ï¼š</span>
                      <span className="text-xs text-slate-600 block mt-0.5 leading-relaxed">{drug.consequence} <br/> <span className="text-slate-400">({drug.source})</span></span>
                    </div>
                  </div>

                  <div className="mt-3 bg-emerald-50 p-3.5 rounded-lg border border-emerald-100">
                    <h4 className="text-xs font-bold text-emerald-700 mb-1 flex items-center gap-1">
                      <ShieldCheck className="w-3.5 h-3.5" /> å®‰å…¨æ›¿ä»£
                    </h4>
                    <p className="text-sm text-slate-700">{drug.alternatives.join("ã€")}</p>
                  </div>
                </div>
              )}
            </div>
          ))
        )}
      </main>

      {/* --- Footer --- */}
      <footer className="text-center text-slate-400 text-[10px] py-10">
        <p>SafeMed AI Ultimate | ä¾æ®å›½å®¶è¯ç›‘å±€å…¬å‘Šæ•´ç†</p>
      </footer>
    </div>
  );
};

export default SafeMedGuardAIUltimate;
